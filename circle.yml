general:
  branches:
    ignore:
      - gh-pages
dependencies:
  override:
    - nvm install 4.3.2
    - nvm install 6
    - nvm use 6 && nvm alias default 6
    - which node
    # TODO test yarn with node_modules installed via npm2, npm3 and latest stable yarn
    - npm install
test:
  override:
    - nvm use 4.3.2 && nvm alias default 4.3.2
    - node -v
    - npm run test-ci
    - nvm use 6 && nvm alias default 6
    - node -v
    - npm run test-ci
    - npm run build-dist
    - npm run check-lockfile
